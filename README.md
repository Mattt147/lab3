# Генератор цитат и фактов

## Описание

Приложение с графическим интерфейсом для управления и генерации цитат и фактов по различным темам. Позволяет добавлять новые цитаты и факты, просматривать их по темам, получать случайные цитаты, отслеживать активность через график и логи.

Приложение реализовано с использованием объектно-ориентированного подхода (ООП) и включает:
- Управление цитатами и фактами по темам
- Таблицу для отображения данных
- Поля ввода для добавления новых записей
- График активности по темам
- Логирование всех действий
- Меню с функциями управления и выхода
- Обработку исключительных ситуаций через пользовательские исключения

## Инструкции по запуску

### Требования

- Python 3.7 или выше
- Библиотека matplotlib (для графиков)
- Библиотека pytest (для тестирования)

### Установка зависимостей

```bash
pip install -r requirements.txt
```

### Запуск приложения

```bash
python main.py
```

Или на некоторых системах:

```bash
python3 main.py
```

### Запуск тестов

Для запуска тестов используйте pytest:

```bash
pytest
```

Для более подробного вывода:

```bash
pytest -v
```

Для запуска конкретного тестового файла:

```bash
pytest test_quote_generator.py
pytest test_database.py
pytest test_exceptions.py
```

## Краткая справка

### Основные функции

1. **Добавление цитаты/факта:**
   - Введите название темы в поле "Тема"
   - Введите содержимое цитаты или факта в текстовое поле "Содержимое"
   - Нажмите кнопку "Добавить"
   - Цитата будет сохранена и отображена в таблице

2. **Просмотр цитат:**
   - Используйте выпадающий список "Тема" для выбора конкретной темы
   - Выберите "Все темы" для просмотра всех цитат
   - Таблица автоматически обновляется при выборе темы

3. **Случайная цитата:**
   - Нажмите кнопку "Случайная цитата"
   - Если выбрана конкретная тема, будет показана случайная цитата из этой темы
   - Если тема не выбрана, будет показана случайная цитата из всех тем

4. **График активности:**
   - Отображается в правой панели
   - Показывает количество действий (добавление, просмотр) по каждой теме
   - Обновляется автоматически при каждом действии

5. **Логи активности:**
   - Отображаются в правой нижней панели
   - Показывают последние 20 действий с временными метками
   - Включают тип действия, тему и краткое содержимое

### Меню приложения

- **Файл > Обновить** - обновляет все компоненты интерфейса (таблица, график, логи)
- **Файл > Выход** - закрывает приложение с подтверждением
- **Помощь > О программе** - информация о приложении
- **Помощь > Справка** - подробная справка по использованию

### Структура проекта

```
lab3/
├── main.py                  # Точка входа в приложение
├── gui.py                   # Класс графического интерфейса
├── quote_generator.py       # Класс генератора цитат и фактов
├── database.py              # Класс для работы с SQLite БД
├── exceptions.py            # Пользовательские исключения
├── test_quote_generator.py  # Тесты для QuoteGenerator
├── test_database.py         # Тесты для Database
├── test_exceptions.py       # Тесты для исключений
├── requirements.txt         # Зависимости проекта
├── README.md               # Документация
├── quotes.db               # База данных SQLite (создается автоматически)
└── activity.log            # Файл логов (создается автоматически)
```

### Обработка ошибок

Приложение использует собственные классы исключений:
- `EmptyTopicException` - при попытке добавить цитату с пустой темой
- `EmptyContentException` - при попытке добавить цитату с пустым содержимым
- `TopicNotFoundException` - при обращении к несуществующей теме
- `InvalidDataException` - при ошибках работы с данными

Все ошибки отображаются пользователю в диалоговых окнах и логируются в файл `activity.log`.

### Хранение данных

Данные сохраняются в базе данных SQLite (`quotes.db`). База данных содержит три таблицы:
- `topics` - таблица тем
- `quotes` - таблица цитат и фактов
- `activity_log` - таблица логов активности

При первом запуске автоматически создается база данных с примерами данных по темам: "Наука", "Философия", "Мотивация".

Логи активности сохраняются в файле `activity.log` и также в базе данных (последние 100 записей).

### Тестирование

Приложение покрыто тестами с использованием pytest. Тесты проверяют:
- Работу с базой данных (создание, добавление, получение данных)
- Функциональность генератора цитат (добавление, получение, случайный выбор)
- Обработку исключений
- Логирование активности
- Статистику активности

Все тесты используют временные базы данных, поэтому не влияют на основную БД приложения.

Для запуска всех тестов:
```bash
pytest
```

Для запуска с покрытием кода:
```bash
pytest --cov=. --cov-report=html
```

